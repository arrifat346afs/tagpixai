
app-id: com.tagpixai.TagpixAi
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.node20
command: tagpixai.sh
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=pulseaudio
  - --share=network
  - --device=dri
modules:
  - name: tagpixai
    buildsystem: simple
    build-options:
      build-args:
        - --share=network
      env:
        - PATH=/usr/lib/sdk/node20/bin:/app/bin:/bin:/usr/bin:$PATH
    build-commands:
      - npm install --legacy-peer-deps
      - npm run transpile:electron
      - npm run build
      - |
        install -d /app/bin
        install -d /app/lib
        cp -r dist-electron /app/lib/
        cp -r dist /app/lib/
        install -m 0755 tagpixai.sh /app/bin/
    sources:
      - type: dir
        path: .

